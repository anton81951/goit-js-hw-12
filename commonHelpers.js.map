{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// render-functions.js\n\nimport SimpleLightbox from \"simplelightbox\";\n\nfunction displayImages(images, isLoadMore) {\n    const gallery = document.querySelector('.gallery');\n\n    if (!isLoadMore) {\n        gallery.innerHTML = ''; // Clear gallery if it's a new search\n    }\n\n    images.forEach(image => {\n        const listItem = document.createElement('li');\n        listItem.classList.add('galleryItem');\n\n        const link = document.createElement('a');\n        link.href = image.largeImageURL;\n        link.setAttribute('data-lightbox', 'gallery');\n\n        const img = document.createElement('img');\n        img.classList.add('smallImage');\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n\n        link.appendChild(img);\n        listItem.appendChild(link);\n\n        const statsContainer = document.createElement('div');\n        statsContainer.classList.add('statsContainer');\n\n        const statsColumns = ['Likes', 'Views', 'Comments', 'Downloads'];\n        statsColumns.forEach(column => {\n            const statsColumn = document.createElement('div');\n            statsColumn.classList.add('statsColumn');\n\n            const statsLabel = document.createElement('div');\n            statsLabel.classList.add('stats');\n            statsLabel.textContent = column;\n\n            const statsValue = document.createElement('div');\n            statsValue.classList.add(`${column.toLowerCase()}Number`, 'statsvalue');\n            statsValue.textContent = image[column.toLowerCase()];\n\n            statsColumn.appendChild(statsLabel);\n            statsColumn.appendChild(statsValue);\n\n            statsContainer.appendChild(statsColumn);\n        });\n\n        listItem.appendChild(statsContainer);\n        gallery.appendChild(listItem);\n    });\n\n    // Initialize or refresh lightbox after rendering images\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nexport { displayImages };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport { displayImages } from \"./render-functions\";\n\nconst apiKey = '9233093-942588744ee96c4f575017f3e';\nlet currentPage = 1;\nconst resultsPerPage = 15;\nlet totalHits = 0;\n\nasync function pixabaySearch(isLoadMore) {\n    const input = document.querySelector('.input');\n    const searchInput = input.value.trim();\n\n    if (searchInput === \"\") {\n        const loadBtn = document.querySelector(\".loadbtn\");\n        loadBtn.style.display = 'none';\n        showErrorToast(\"Empty input!\");\n        return;\n    }\n\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n\n    let url = `https://pixabay.com/api/?key=${apiKey}&q=${searchInput}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}`;\n\n    if (isLoadMore) {\n        currentPage++;\n    } else {\n        currentPage = 1;\n    }\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            const errorMessage = isLoadMore ? \"Sorry, there are no more images to load.\" : \"Sorry, there are no images matching your search query. Please try again!\";\n            showErrorToast(errorMessage);\n            document.querySelector(\".form\").reset();\n        } else {\n            totalHits = data.totalHits;\n            const imagesToDisplay = data.hits.slice(0, resultsPerPage);\n            displayImages(imagesToDisplay, isLoadMore);\n            if (!isLoadMore) {\n                const loadBtn = document.querySelector(\".loadbtn\");\n                loadBtn.style.display = 'block';\n            } else if (totalHits <= currentPage * resultsPerPage) {\n                const loadBtn = document.querySelector(\".loadbtn\");\n                loadBtn.style.display = 'none';\n                if (totalHits > resultsPerPage) {\n                    showEndOfResultsMessage();\n                }\n            }\n        }\n    } catch (error) {\n        console.error('axios problem', error);\n        showErrorToast('axios problem');\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nfunction showErrorToast(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topCenter'\n    });\n}\n\nfunction showEndOfResultsMessage() {\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topCenter'\n    });\n}\n\n\nexport { pixabaySearch, showErrorToast, showEndOfResultsMessage };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nimport { pixabaySearch, showErrorToast, showEndOfResultsMessage } from \"./js/pixabay-api\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.createElement('div');\nloader.style.display = 'none';\nloader.classList.add('loader');\ndocument.body.appendChild(loader);\n\nconst loadBtn = document.querySelector(\".loadbtn\");\nloadBtn.style.display = 'none';\n\ndocument.querySelector(\".form\").addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n\n    try {\n        await pixabaySearch(false);\n    } catch (error) {\n        console.error('fetching error', error);\n        showErrorToast('fetching error');\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\ndocument.querySelector(\".loadbtn\").addEventListener(\"click\", () => {\n    loader.style.display = 'block';\n    pixabaySearch(true);\n    if (loadBtn.style.display !== 'none') {\n        const galleryItemHeight = document.querySelector('.smallImage').getBoundingClientRect().height;\n        const scrollAmount = galleryItemHeight * 20;\n        window.scrollBy({\n            top: scrollAmount,\n            behavior: 'smooth'\n        });\n    }\n});\n\nlet currentPage = 1;\nconst resultsPerPage = 15;\nconst apiKey = '9233093-942588744ee96c4f575017f3e';\nlet totalHits = 0;\n"],"names":["displayImages","images","isLoadMore","gallery","image","listItem","link","img","statsContainer","column","statsColumn","statsLabel","statsValue","SimpleLightbox","apiKey","currentPage","resultsPerPage","totalHits","pixabaySearch","searchInput","loadBtn","showErrorToast","loader","url","data","axios","imagesToDisplay","showEndOfResultsMessage","error","message","iziToast","event","scrollAmount"],"mappings":"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"}